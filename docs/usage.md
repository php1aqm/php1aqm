# 骰子加解密系统使用指南

本文档提供了骰子加解密系统的详细使用说明，包括图形界面操作和命令行使用方法。

## 目录

- [安装说明](#安装说明)
- [图形界面使用](#图形界面使用)
- [命令行使用](#命令行使用)
- [密钥管理](#密钥管理)
- [文件加解密](#文件加解密)
- [常见问题](#常见问题)

## 安装说明

### 环境要求

- Python 3.6 或更高版本
- 支持的操作系统：Windows、Linux、macOS

### 安装步骤

1. 克隆仓库

```bash
git clone https://github.com/php1aqm/php1aqm.git
cd php1aqm
```

2. 安装依赖

```bash
pip install -r requirements.txt
```

3. 验证安装

```bash
python main.py -h
```

如果显示帮助信息，则安装成功。

## 图形界面使用

### 启动图形界面

```bash
python main.py
```

或

```bash
python main.py -g
```

### 文本加密

1. 在左上文本框输入要加密的文本
2. 点击"生成密钥"按钮获取随机密钥
3. 点击"加密"按钮进行加密
4. 加密后的文本会显示在左下文本框
5. 请记录显示的密钥，解密时需要使用

### 文本解密

1. 在右上文本框输入要解密的文本
2. 在下方输入框中输入完整的四位密钥（格式为：`初始UP值 初始FRONT值 加密后UP值 加密后FRONT值`）
3. 点击"解密"按钮进行解密
4. 解密后的文本会显示在右下文本框

### 界面功能说明

- **生成密钥**：随机生成一组加密密钥
- **获取密钥**：从加密结果中提取密钥信息
- **加密**：执行加密操作
- **解密**：执行解密操作
- **传递文本**：将加密后的文本传递到解密输入框

## 命令行使用

### 基本命令

```bash
python main.py [选项]
```

### 可用选项

- `-g, --gui`：启动图形界面
- `-f, --file`：文件加解密模式
- `-t, --text TEXT`：指定要加解密的文本
- `-k, --key KEY`：指定密钥（格式："UP FRONT"）
- `-e, --encrypt`：加密模式
- `-d, --decrypt`：解密模式
- `-h, --help`：显示帮助信息

### 示例

加密文本：

```bash
python main.py -t "你好，世界" -k "2 3" -e
```

解密文本：

```bash
python main.py -t "加密后的文本" -k "2 3 4 5" -d
```

## 密钥管理

### 密钥格式

- 加密初始密钥：两个数字，分别表示骰子的UP和FRONT面（例如：`2 3`）
- 解密密钥：四个数字，分别表示初始UP值、初始FRONT值、加密后UP值、加密后FRONT值（例如：`2 3 4 5`）

### 密钥生成规则

- UP和FRONT的值范围为1-6
- UP + FRONT ≠ 7
- UP ≠ FRONT

### 密钥保存建议

密钥是解密的唯一凭证，请妥善保存。建议：

- 不要在公共场合或不安全的通信渠道传输密钥
- 可以将密钥分两部分保存，降低泄露风险
- 对重要文档使用多重加密

## 文件加解密

### 使用方法

```bash
python main.py -f
```

或直接运行：

```bash
python src/加解密文件.py
```

### 示例文件

在`examples`目录中提供了示例文件供参考：
- `1.txt`: 示例输入文本
- `ciphertext.txt`: 加密后的结果
- `pinyin_text.txt`: 中文转拼音的结果
- `decrypted_plaintext.txt`: 解密后的文本
- `pinyin_plaintext.txt`: 解密后转换回中文的结果

### 操作流程

1. 准备要加密的文件，命名为`1.txt`并放在程序同一目录下
2. 运行程序，会自动生成以下文件：
   - `pinyin_text.txt`：中文转拼音后的文本
   - `ciphertext.txt`：加密后的密文和密钥
   - `decrypted_plaintext.txt`：解密后的文本
   - `pinyin_plaintext.txt`：解密后转换回中文的文本

## 常见问题

### 解密后文本乱码

**可能原因**：
- 密钥输入错误
- 密文在传输过程中被修改

**解决方案**：
- 确认密钥格式和数值是否正确
- 检查密文是否完整无误

### 中文显示问题

**可能原因**：
- 拼音转换不准确
- 字符编码问题

**解决方案**：
- 查看`pinyin_text.txt`确认拼音转换是否正确
- 确保使用UTF-8编码保存和打开文件

### 程序崩溃

**可能原因**：
- 依赖库缺失
- 输入格式不正确

**解决方案**：
- 重新安装依赖：`pip install -r requirements.txt`
- 检查输入文本或文件格式 